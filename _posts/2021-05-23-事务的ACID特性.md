---
layout:     post
title:      数据库
subtitle:   事务的ACID特性
date:       2021-5-23
author:     焦旭峰
header-img: img/the-first.png
catalog:   true
tags:
    - MySQL
---





> # 事务的ACID特性

## 1、什么是事务

**事务是指满足ACID特性的一组操作，这组操作要么全部成功，要么全部失败。**

举个简单的例子，小张给小明转账100块钱，这个转账会包含两个操作：

1、将小张的余额减少100块；

2、将小明的余额增加100块。

事务会将上述两个操作看作一个整体，1和2必须都成功或者都失败。

## 2、ACID特性

### 2.1、原子性（Atomicity）

**事务是不可分割的最小单元，事务的所有操作要么全部提交成功，要么全部失败回滚。**

**回滚可以用Undo Log来实现**，回滚日志记录着事务所执行的修改操作，在回滚时反向执行这些修改操作即可。

### 2.2、一致性（Consistency）

**在事务执行前后，数据都保持一致性状态。在一致性状态下，所有事务对同一个数据的读取结果都是相同的。**

例如转账业务中，无论事务是否成功，转账人和收款人的总金额不变。

### 2.3、隔离性（Isolation）

**一个事务所做的修改在最终提交以前，对其它事务是不可见的。**

也就是说，并发访问数据库时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的。

### 2.4、 持久性（Durability）

**一旦事务提交，则其所做的修改将会永远保存到数据库中。**即使系统发生崩溃，事务执行的结果也不能丢失。

**系统发生崩溃可以用Redo Log进行恢复，从而实现持久性**。与回滚日志记录数据的逻辑修改不同，重做日志记录的是数据页的物理修改。



